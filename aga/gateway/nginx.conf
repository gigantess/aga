worker_processes  1;
events { worker_connections 1024; }
http {
  include       /etc/nginx/mime.types;
  default_type  application/octet-stream;
  sendfile        on;
  keepalive_timeout  65;
  map $http_x_tenant $tenant { default $http_x_tenant; }
  server {
    listen 80;
    location /api/nl-dsl/ { proxy_pass http://nl-dsl:3001/; proxy_set_header X-Tenant $tenant; }
    location /api/planner/ { proxy_pass http://planner:3002/; proxy_set_header X-Tenant $tenant; }
    location /api/policy/ { proxy_pass http://policy-guard:3003/; proxy_set_header X-Tenant $tenant; }
    location /api/manifest/ { proxy_pass http://manifest:3004/; proxy_set_header X-Tenant $tenant; }
  }
}
